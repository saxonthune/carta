@import "tailwindcss";

/* Theme Variables */
:root,
[data-theme="light"] {
  --color-canvas: #e4e6ea;
  --color-surface: #ffffff;
  --color-surface-alt: #f3f4f6;
  --color-surface-elevated: #ffffff;
  --color-surface-depth-1: #f9fafb;
  --color-surface-depth-2: #f3f4f6;
  --color-surface-depth-3: #ffffff;
  --color-surface-inset: #eef0f4;
  --color-border: #d1d5db;
  --color-border-subtle: #f3f4f6;
  --color-content: #1f2937;
  --color-content-muted: #6b7280;
  --color-content-subtle: #9ca3af;
  --color-accent: #6366f1;
  --color-accent-hover: #4f46e5;
  --color-accent-muted: #e0e7ff;
  --color-danger: #ef4444;
  --color-danger-hover: #dc2626;
  --color-danger-muted: #fee2e2;
  --color-guide: #0d9488;
  --color-guide-muted: #ccfbf1;
  --text-halo-color: rgba(255, 255, 255, 0.85);
  --node-shadow: 0 1px 3px rgba(0, 0, 0, 0.08), 0 4px 12px rgba(0, 0, 0, 0.04);
  --node-shadow-selected: 0 1px 3px rgba(99, 102, 241, 0.12), 0 4px 16px rgba(99, 102, 241, 0.08);
  --edge-default-color: #94a3b8;
  --color-dot-grid: rgba(0, 0, 0, 0.28);
  --deployable-fill-opacity: 0.12;
  --deployable-stroke-opacity: 0.20;
}

[data-theme="dark"] {
  --color-canvas: #09090b;
  --color-surface: #18181b;
  --color-surface-alt: #27272a;
  --color-surface-elevated: #27272a;
  --color-surface-depth-1: #27272a;
  --color-surface-depth-2: #1f1f23;
  --color-surface-depth-3: #18181b;
  --color-surface-inset: #111113;
  --color-border: #3f3f46;
  --color-border-subtle: #27272a;
  --color-content: #e4e4e7;
  --color-content-muted: #a1a1aa;
  --color-content-subtle: #71717a;
  --color-accent: #818cf8;
  --color-accent-hover: #6366f1;
  --color-accent-muted: #312e81;
  --color-danger: #f87171;
  --color-danger-hover: #ef4444;
  --color-danger-muted: #7f1d1d;
  --color-guide: #2dd4bf;
  --color-guide-muted: #134e4a;
  --text-halo-color: rgba(0, 0, 0, 0.8);
  --node-shadow: 0 1px 3px rgba(0, 0, 0, 0.3), 0 4px 12px rgba(0, 0, 0, 0.2);
  --node-shadow-selected: 0 1px 3px rgba(129, 140, 248, 0.2), 0 4px 16px rgba(129, 140, 248, 0.15);
  --edge-default-color: #71717a;
  --color-dot-grid: rgba(255, 255, 255, 0.2);
  --deployable-fill-opacity: 0.06;
  --deployable-stroke-opacity: 0.12;
}

[data-theme="warm"] {
  --color-canvas: #0f0a08;
  --color-surface: #1c1410;
  --color-surface-alt: #2c2218;
  --color-surface-elevated: #2c2218;
  --color-surface-depth-1: #2c2218;
  --color-surface-depth-2: #221814;
  --color-surface-depth-3: #1c1410;
  --color-surface-inset: #150f0b;
  --color-border: #44362a;
  --color-border-subtle: #2c2218;
  --color-content: #e8d5c4;
  --color-content-muted: #a8917a;
  --color-content-subtle: #73614f;
  --color-accent: #f59e0b;
  --color-accent-hover: #d97706;
  --color-accent-muted: #451a03;
  --color-danger: #ef4444;
  --color-danger-hover: #dc2626;
  --color-danger-muted: #7f1d1d;
  --color-guide: #d97706;
  --color-guide-muted: #451a03;
  --text-halo-color: rgba(0, 0, 0, 0.8);
  --node-shadow: 0 1px 3px rgba(0, 0, 0, 0.3), 0 4px 12px rgba(0, 0, 0, 0.2);
  --node-shadow-selected: 0 1px 3px rgba(245, 158, 11, 0.2), 0 4px 16px rgba(245, 158, 11, 0.15);
  --edge-default-color: #73614f;
  --color-dot-grid: rgba(255, 255, 255, 0.2);
  --deployable-fill-opacity: 0.06;
  --deployable-stroke-opacity: 0.12;
}

@theme {
  --color-canvas: var(--color-canvas);
  --color-surface: var(--color-surface);
  --color-surface-alt: var(--color-surface-alt);
  --color-surface-elevated: var(--color-surface-elevated);
  --color-surface-depth-1: var(--color-surface-depth-1);
  --color-surface-depth-2: var(--color-surface-depth-2);
  --color-surface-depth-3: var(--color-surface-depth-3);
  --color-surface-inset: var(--color-surface-inset);
  --color-border: var(--color-border);
  --color-border-subtle: var(--color-border-subtle);
  --color-content: var(--color-content);
  --color-content-muted: var(--color-content-muted);
  --color-content-subtle: var(--color-content-subtle);
  --color-accent: var(--color-accent);
  --color-accent-hover: var(--color-accent-hover);
  --color-accent-muted: var(--color-accent-muted);
  --color-danger: var(--color-danger);
  --color-danger-hover: var(--color-danger-hover);
  --color-danger-muted: var(--color-danger-muted);
  --color-guide: var(--color-guide);
  --color-guide-muted: var(--color-guide-muted);

  --text-2xs: 0.6875rem; /* 11px */
  --text-xs: 0.75rem; /* 12px */
  --text-sm: 0.875rem; /* 14px */
  --text-base: 0.9375rem; /* 15px */
  --text-lg: 1.125rem; /* 18px */
  --text-xl: 1.25rem; /* 20px */

  --text-node-2xs: 0.5625rem; /* 9px */
  --text-node-xs: 0.625rem; /* 10px */
  --text-node-sm: 0.6875rem; /* 11px */
  --text-node-base: 0.75rem; /* 12px */
  --text-node-lg: 0.8125rem; /* 13px */
}

* {
  box-sizing: border-box;
}

html,
body,
#root {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  font-family: system-ui, -apple-system, sans-serif;
  background: var(--color-surface);
  color: var(--color-content);
}

/* Node header text legibility — large, soft, layered shadow */
@utility text-halo {
  text-shadow:
    0 2px 12px var(--text-halo-color),
    0 4px 24px color-mix(in srgb, var(--text-halo-color) 75%, transparent),
    0 8px 48px color-mix(in srgb, var(--text-halo-color) 50%, transparent);
}

/* Markdown rendering in simple mode nodes — compact, no extra spacing */
.simple-markdown {
  line-height: 1.2;
  white-space: normal;
}
/* Nuclear reset: kill all Tailwind Preflight margins/padding inside markdown */
.simple-markdown * {
  margin: 0;
  padding: 0;
}
.simple-markdown h1 { font-size: 1.2em; font-weight: 700; }
.simple-markdown h2 { font-size: 1.1em; font-weight: 600; }
.simple-markdown h3 { font-size: 1em; font-weight: 600; }
.simple-markdown ul,
.simple-markdown ol {
  padding-left: 18px;
}
.simple-markdown ul { list-style: disc; }
.simple-markdown ol { list-style: decimal; }
.simple-markdown blockquote {
  padding-left: 8px;
  border-left: 2px solid currentColor;
  opacity: 0.75;
}
.simple-markdown hr {
  border: none;
  border-top: 1px solid currentColor;
  opacity: 0.25;
  margin: 4px 0;
}
.simple-markdown code {
  font-family: var(--font-mono, monospace);
  font-size: 0.9em;
  padding: 1px 4px;
  border-radius: 3px;
  background: rgba(0,0,0,0.08);
}
.simple-markdown del {
  opacity: 0.6;
}
.simple-markdown pre {
  white-space: pre-wrap;
  font-family: inherit;
}
.simple-markdown pre code {
  background: none;
}
